{"version":3,"file":"showMore.js","sources":["../../sources/utils/function.js","../../sources/utils/regex.js","../../sources/utils/defaults.js","../../sources/index.js"],"sourcesContent":["/**\r\n * Get hidden element\r\n *\r\n * @param {object} object\r\n * @param {String} type - type of element table | div\r\n * @returns\r\n */\r\nexport const getNumber = ({ rows, children }, type) => {\r\n  const elementType = type === \"table\" ? rows : children;\r\n\r\n  const numbersElementHidden = [].slice\r\n    .call(elementType)\r\n    .filter((el) => el.classList.contains(\"hidden\")).length;\r\n  return numbersElementHidden !== 0 ? ` ${numbersElementHidden}` : \"\";\r\n};\r\n\r\n// https://stackoverflow.com/questions/6003271/substring-text-with-html-tags-in-javascript\r\n/**\r\n * Substring text width html tags\r\n *\r\n * @param {String} originalText - text with html tags\r\n * @param {String} count - limit of characters\r\n * @returns\r\n */\r\nexport const htmlSubstr = (originalText, count) => {\r\n  let div = createElement(\"div\");\r\n  div.insertAdjacentHTML(\"afterbegin\", originalText);\r\n\r\n  walk(div, track);\r\n\r\n  function track(el) {\r\n    if (count > 0) {\r\n      let len = el.data.length;\r\n      count -= len;\r\n      if (count <= 0) {\r\n        el.data = el.substringData(0, el.data.length + count);\r\n      }\r\n    } else {\r\n      el.data = \"\";\r\n    }\r\n  }\r\n\r\n  function walk(el, fn) {\r\n    let node = el.firstChild;\r\n    do {\r\n      if (node.nodeType === 3) {\r\n        fn(node);\r\n      } else if (node.nodeType === 1 && node.childNodes && node.childNodes[0]) {\r\n        walk(node, fn);\r\n      }\r\n    } while ((node = node.nextSibling));\r\n  }\r\n  return div.innerHTML;\r\n};\r\n\r\n/**\r\n * Add/remove class 'hidden' to element\r\n *\r\n * @param {HTMLElement} element\r\n * @param {String} type - type of element add or remove\r\n */\r\nexport const addRemoveClass = (element, type = false) => {\r\n  return element.classList[type ? \"add\" : \"remove\"](\"hidden\");\r\n};\r\n\r\n/**\r\n * Set attributes to element\r\n *\r\n * @param {HTMLElement} el\r\n * @param {Object} object\r\n */\r\nexport const setAttributes = (el, object) => {\r\n  for (let key in object) {\r\n    el.setAttribute(key, object[key]);\r\n  }\r\n};\r\n\r\n/**\r\n * Create element\r\n *\r\n * @param {String} type - type of element\r\n * @returns {HTMLElement}\r\n */\r\nexport const createElement = (type) => document.createElement(type);\r\n","/**\r\n * Default regexes for validation\r\n */\r\nexport const defaultRegex = {\r\n  newLine: {\r\n    match: /(\\r\\n|\\n|\\r)/gm,\r\n    replace: \"\",\r\n  },\r\n  space: {\r\n    match: /\\s\\s+/gm,\r\n    replace: \" \",\r\n  },\r\n  br: {\r\n    match: /<br\\s*\\/?>/gim,\r\n    replace: \"\",\r\n  },\r\n  html: {\r\n    match: /(<((?!b|\\/b|!strong|\\/strong)[^>]+)>)/gi,\r\n    replace: \"\",\r\n  },\r\n};\r\n","export const defaultOptions = {\r\n  typeElement: \"span\",\r\n  more: false,\r\n  less: false,\r\n  number: false,\r\n  nobutton: false,\r\n  after: 0,\r\n  btnClass: \"show-more-btn\",\r\n  btnClassAppend: null,\r\n};\r\n","import {\r\n  addRemoveClass,\r\n  createElement,\r\n  getNumber,\r\n  htmlSubstr,\r\n  setAttributes,\r\n} from \"./utils/function\";\r\nimport { defaultRegex } from \"./utils/regex\";\r\nimport { defaultOptions } from \"./utils/defaults\";\r\n\r\n/**\r\n * @class ShowMore\r\n */\r\nexport default class ShowMore {\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param {HTMLElement} className\r\n   * @param {Object} object\r\n   */\r\n  constructor(className, { onMoreLess = () => {}, regex = {}, config } = {}) {\r\n    // all html elements\r\n    const elements = [].slice.call(document.querySelectorAll(className));\r\n\r\n    // colback function\r\n    this._onMoreLess = onMoreLess;\r\n\r\n    // global regex\r\n    this._regex = { ...defaultRegex, ...regex };\r\n\r\n    elements.map((item, index) => {\r\n      const configData = JSON.parse(item.getAttribute(\"data-config\"));\r\n      const configGlobal = config;\r\n\r\n      const configDataAndGlobal = { ...configGlobal, ...configData };\r\n\r\n      this._object = {\r\n        index,\r\n        classArray: item.classList,\r\n        ...defaultOptions,\r\n        ...configDataAndGlobal,\r\n        typeElement: configDataAndGlobal.element || \"span\",\r\n        element: item,\r\n      };\r\n\r\n      this._initial();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Initail function\r\n   *\r\n   * @param {Object} object\r\n   */\r\n  _initial = () => {\r\n    const { element, after, ellipsis, nobutton, limit, type } = this._object;\r\n    // set default aria-expande to false\r\n    setAttributes(element, { \"showmore-expanded\": \"false\" });\r\n\r\n    const limitCounts = limit + after;\r\n    const ellips = ellipsis === false ? \"\" : \"...\";\r\n\r\n    // console.log(nobutton);\r\n\r\n    // text\r\n    if (type === \"text\") {\r\n      const originalText = element.innerHTML.trim();\r\n      const elementText = element.textContent.trim();\r\n\r\n      if (elementText.length > limitCounts) {\r\n        let orgTexReg = originalText;\r\n\r\n        for (let key in this._regex) {\r\n          const { match, replace } = this._regex[key];\r\n          if (key && match) orgTexReg = orgTexReg.replace(match, replace);\r\n        }\r\n\r\n        const truncatedText = htmlSubstr(orgTexReg, limit - 1).concat(ellips);\r\n\r\n        element.textContent = \"\";\r\n        element.insertAdjacentHTML(\"beforeend\", truncatedText);\r\n\r\n        this._clickEvent(element, {\r\n          ...this._object,\r\n          originalText,\r\n          truncatedText,\r\n        });\r\n\r\n        if (nobutton) return;\r\n        this._addBtn(this._object);\r\n      }\r\n    }\r\n\r\n    // list and table\r\n    if (type === \"list\" || type === \"table\") {\r\n      const items = this._getNumberCount(element, type);\r\n\r\n      if (items.length > limitCounts) {\r\n        for (let i = limit; i < items.length; i++) {\r\n          addRemoveClass(items[i], true);\r\n        }\r\n\r\n        if (!nobutton) {\r\n          // add button to the list and table\r\n          this._addBtn(this._object);\r\n        }\r\n\r\n        // add event click\r\n        this._clickEvent(\r\n          type === \"list\" ? element : element.nextElementSibling,\r\n          this._object,\r\n        );\r\n\r\n        if (nobutton) return;\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Event click\r\n   *\r\n   * @param {HTMLElement} element\r\n   * @param {Object} object\r\n   */\r\n  _clickEvent = (element, object) =>\r\n    element.addEventListener(\"click\", this._handleEvent.bind(this, object));\r\n\r\n  /**\r\n   * Create button\r\n   *\r\n   * @param {Object} object\r\n   * @returns HTMLElement\r\n   */\r\n  _createBtn = ({\r\n    element,\r\n    number,\r\n    less,\r\n    more,\r\n    type,\r\n    btnClass,\r\n    btnClassAppend,\r\n  }) => {\r\n    const typeAria = this._checkExp ? less || \"\" : more || \"\";\r\n    let label = this._checkExp\r\n      ? less.trim() || \"collapse\"\r\n      : more.trim() || \"expand\";\r\n\r\n    label = number ? label + getNumber(element, type) : label;\r\n\r\n    const expanded = this._checkExp ? true : false;\r\n\r\n    const button = createElement(\"button\");\r\n\r\n    button.className =\r\n      btnClassAppend == null ? btnClass : btnClass + \" \" + btnClassAppend;\r\n    setAttributes(button, {\r\n      \"aria-expanded\": expanded,\r\n      \"aria-label\": label,\r\n      tabindex: 0,\r\n    });\r\n\r\n    button.insertAdjacentHTML(\r\n      \"beforeend\",\r\n      number ? typeAria + getNumber(element, type) : typeAria,\r\n    );\r\n\r\n    return button;\r\n  };\r\n\r\n  /**\r\n   * Event handler\r\n   *\r\n   * @param {Object} object\r\n   * @param {Event} event\r\n   */\r\n  _handleEvent = (object, { target }) => {\r\n    const {\r\n      element,\r\n      type,\r\n      limit,\r\n      less,\r\n      typeElement,\r\n      originalText,\r\n      truncatedText,\r\n      btnClass,\r\n    } = object;\r\n\r\n    // check if the button is clicked\r\n    const checkContainsClass = target.classList.contains(btnClass);\r\n\r\n    if (!checkContainsClass) return;\r\n\r\n    const showMoreExpanded = element.getAttribute(\"showmore-expanded\");\r\n    this._checkExp = showMoreExpanded === \"false\";\r\n\r\n    // --------------------------------------------------\r\n    // text\r\n    if (type === \"text\" && checkContainsClass) {\r\n      element.textContent = \"\";\r\n\r\n      element.insertAdjacentHTML(\r\n        \"beforeend\",\r\n        this._checkExp ? originalText : truncatedText,\r\n      );\r\n\r\n      if (less) {\r\n        const el = createElement(typeElement);\r\n        el.classList.add(\"show-more-wrapper\");\r\n        el.insertAdjacentElement(\"beforeend\", this._createBtn(object));\r\n        element.appendChild(el);\r\n      }\r\n    }\r\n\r\n    // --------------------------------------------------\r\n    // list and table\r\n    if (type === \"list\" || type === \"table\") {\r\n      const items = this._getNumberCount(element, type);\r\n\r\n      for (let i = 0; i < items.length; i++) {\r\n        const typeRemove =\r\n          type === \"list\" ? i >= limit && i < items.length - 1 : i >= limit;\r\n\r\n        if (showMoreExpanded === \"false\") {\r\n          addRemoveClass(items[i]);\r\n        } else if (typeRemove) {\r\n          addRemoveClass(items[i], true);\r\n        }\r\n      }\r\n    }\r\n\r\n    // set aria-expanded\r\n    if (type) {\r\n      this._setExpand({ ...object, target });\r\n    }\r\n  };\r\n\r\n  _getNumberCount = (element, type) => {\r\n    return type === \"list\" ? [].slice.call(element.children) : element.rows;\r\n  };\r\n\r\n  /**\r\n   * Add button\r\n   *\r\n   * @param {Object} object\r\n   */\r\n  _addBtn = (object) => {\r\n    const { type, element, more, typeElement } = object;\r\n\r\n    if (!more) return;\r\n\r\n    if (type === \"table\") {\r\n      element.insertAdjacentElement(\"afterend\", this._createBtn(object));\r\n    } else {\r\n      const el = createElement(typeElement);\r\n      el.classList.add(\"show-more-wrapper\");\r\n      el.appendChild(this._createBtn(object));\r\n      element.appendChild(el);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set aria-expanded\r\n   *\r\n   * @param {Object} object\r\n   */\r\n  _setExpand = (object) => {\r\n    const { element, type, less, more, number, target } = object;\r\n\r\n    const typeAria = this._checkExp ? less : more;\r\n    const aria = this._checkExp ? \"expand\" : \"collapse\";\r\n    const lastChild = element.lastElementChild;\r\n\r\n    const ariaLabel = number ? typeAria + getNumber(element, type) : typeAria;\r\n\r\n    setAttributes(element, { \"showmore-expanded\": this._checkExp });\r\n    setAttributes(target, {\r\n      \"aria-expanded\": this._checkExp,\r\n      \"aria-label\": ariaLabel,\r\n    });\r\n\r\n    // callback function on more/less\r\n    this._onMoreLess(aria, object);\r\n\r\n    if (typeAria) {\r\n      target.innerHTML = number\r\n        ? typeAria + getNumber(element, type)\r\n        : typeAria;\r\n    } else if (type === \"table\") {\r\n      target.parentNode.removeChild(target);\r\n    } else if (type === \"list\") {\r\n      lastChild.parentNode.removeChild(lastChild);\r\n    }\r\n  };\r\n}\r\n"],"names":["getNumber","_ref","type","rows","children","elementType","numbersElementHidden","slice","call","filter","el","classList","contains","length","htmlSubstr","originalText","count","div","createElement","insertAdjacentHTML","walk","track","len","data","substringData","fn","node","firstChild","nodeType","childNodes","nextSibling","innerHTML","addRemoveClass","element","setAttributes","object","key","setAttribute","document","defaultRegex","newLine","match","replace","space","br","html","defaultOptions","typeElement","more","less","number","nobutton","after","btnClass","btnClassAppend","ShowMore","constructor","className","_temp","onMoreLess","regex","config","elements","querySelectorAll","_onMoreLess","_regex","map","item","index","configData","JSON","parse","getAttribute","configGlobal","configDataAndGlobal","_object","classArray","_initial","ellipsis","limit","limitCounts","ellips","trim","elementText","textContent","orgTexReg","truncatedText","concat","_clickEvent","_addBtn","items","_getNumberCount","i","nextElementSibling","addEventListener","_handleEvent","bind","_createBtn","typeAria","_checkExp","label","expanded","button","tabindex","_ref2","target","checkContainsClass","showMoreExpanded","add","insertAdjacentElement","appendChild","typeRemove","_setExpand","aria","lastChild","lastElementChild","ariaLabel","parentNode","removeChild"],"mappings":"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"}