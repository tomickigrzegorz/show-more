{"version":3,"file":"showMore.esm.js","sources":["../../sources/utils/defaults.ts","../../sources/utils/function.ts","../../sources/utils/regex.ts","../../sources/index.ts"],"sourcesContent":["export interface ShowMoreOptions {\r\n  typeElement: string;\r\n  more: string | false;\r\n  less: string | false;\r\n  number: boolean;\r\n  nobutton: boolean;\r\n  after: number;\r\n  btnClass: string;\r\n  btnClassAppend: string | null;\r\n  limit?: number;\r\n  type?: \"text\" | \"list\" | \"table\";\r\n  element?: HTMLElement;\r\n  ellipsis?: boolean | string;\r\n  removeElements?: string[];\r\n}\r\n\r\n/**\r\n * Default list of HTML elements to remove (with their content) for type=\"text\"\r\n */\r\nexport const defaultRemoveElements = [\r\n  // Tables\r\n  \"table\",\r\n  \"thead\",\r\n  \"tbody\",\r\n  \"tfoot\",\r\n  \"tr\",\r\n  \"td\",\r\n  \"th\",\r\n  // Lists\r\n  \"ul\",\r\n  \"ol\",\r\n  \"li\",\r\n  \"dl\",\r\n  \"dt\",\r\n  \"dd\",\r\n  // Multimedia\r\n  \"figure\",\r\n  \"figcaption\",\r\n  \"img\",\r\n  \"picture\",\r\n  \"source\",\r\n  \"video\",\r\n  \"audio\",\r\n  // Embedded content\r\n  \"iframe\",\r\n  \"object\",\r\n  \"embed\",\r\n  \"canvas\",\r\n  \"svg\",\r\n  // Scripts & styles\r\n  \"script\",\r\n  \"style\",\r\n  // Forms\r\n  \"form\",\r\n  \"input\",\r\n  \"select\",\r\n  \"textarea\",\r\n  \"button\",\r\n];\r\n\r\nexport const defaultOptions: Partial<ShowMoreOptions> = {\r\n  typeElement: \"span\",\r\n  more: false,\r\n  less: false,\r\n  number: false,\r\n  nobutton: false,\r\n  after: 0,\r\n  btnClass: \"show-more-btn\",\r\n  btnClassAppend: null,\r\n  removeElements: defaultRemoveElements,\r\n};\r\n","/**\r\n * Get hidden element count\r\n *\r\n * @param element - HTMLElement with rows or children\r\n * @param type - type of element table | list\r\n * @returns string with count or empty string\r\n */\r\nexport const getNumber = (\r\n  element: {\r\n    rows?: HTMLCollectionOf<HTMLTableRowElement>;\r\n    children?: HTMLCollection;\r\n  },\r\n  type: string,\r\n): string => {\r\n  const elementType = type === \"table\" ? element.rows : element.children;\r\n\r\n  if (!elementType) return \"\";\r\n\r\n  const numbersElementHidden = Array.from(elementType).filter((el) =>\r\n    el.classList.contains(\"hidden\"),\r\n  ).length;\r\n  return numbersElementHidden !== 0 ? ` ${numbersElementHidden}` : \"\";\r\n};\r\n\r\n/**\r\n * Remove specific HTML elements with their content\r\n *\r\n * @param html - HTML string\r\n * @param tags - Array of tag names to remove (e.g., ['table', 'img', 'figure'])\r\n * @returns HTML string without specified elements\r\n */\r\nexport const removeElements = (html: string, tags: string[]): string => {\r\n  const div = createElement(\"div\");\r\n  div.innerHTML = html;\r\n\r\n  tags.forEach((tag) => {\r\n    const elements = div.querySelectorAll(tag);\r\n    elements.forEach((el) => {\r\n      el.remove();\r\n    });\r\n  });\r\n\r\n  return div.innerHTML;\r\n};\r\n\r\n/**\r\n * Remove table rows where ALL cells are empty\r\n *\r\n * @param div - DOM element containing HTML\r\n */\r\nconst cleanupTableRows = (div: HTMLElement): void => {\r\n  const tables = div.querySelectorAll(\"table\");\r\n  tables.forEach((table) => {\r\n    const rows = table.querySelectorAll(\"tr\");\r\n    rows.forEach((row) => {\r\n      const cells = row.querySelectorAll(\"td, th\");\r\n      // Check if ALL cells in this row are empty\r\n      const allEmpty =\r\n        cells.length > 0 &&\r\n        Array.from(cells).every((cell) => !cell.textContent?.trim());\r\n      if (allEmpty) {\r\n        row.remove();\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\n/**\r\n * Remove empty HTML tags recursively\r\n *\r\n * @param html - HTML string\r\n * @returns HTML string without empty tags\r\n */\r\nconst removeEmptyTags = (html: string): string => {\r\n  let cleaned = html;\r\n  let prev: string;\r\n\r\n  // Recursively remove empty tags (including nested ones)\r\n  // BUT keep table structure tags (td, th, tr) - they're handled separately\r\n  do {\r\n    prev = cleaned;\r\n    // Remove tags that contain only whitespace or &nbsp;\r\n    // Exclude: td, th, tr (table structure handled by cleanupTableRows)\r\n    cleaned = cleaned.replace(\r\n      /<((?!td|th|tr)\\w+)(\\s[^>]*)?>(\\s|&nbsp;|<br\\s*\\/?>)*<\\/\\1>/gi,\r\n      \"\",\r\n    );\r\n  } while (cleaned !== prev);\r\n\r\n  return cleaned;\r\n};\r\n\r\n// https://stackoverflow.com/questions/6003271/substring-text-with-html-tags-in-javascript\r\n/**\r\n * Substring text with html tags\r\n *\r\n * @param originalText - text with html tags\r\n * @param count - limit of characters\r\n * @returns truncated html string\r\n */\r\nexport const htmlSubstr = (originalText: string, count: number): string => {\r\n  const div = createElement(\"div\");\r\n  div.insertAdjacentHTML(\"afterbegin\", originalText);\r\n\r\n  let remaining = count;\r\n\r\n  walk(div, track);\r\n\r\n  function track(el: Text): void {\r\n    if (remaining > 0) {\r\n      const len = el.data.length;\r\n      remaining -= len;\r\n      if (remaining <= 0) {\r\n        el.data = el.substringData(0, el.data.length + remaining);\r\n      }\r\n    } else {\r\n      el.data = \"\";\r\n    }\r\n  }\r\n\r\n  function walk(el: Node, fn: (node: Text) => void): void {\r\n    let node = el.firstChild;\r\n    while (node) {\r\n      if (node.nodeType === 3) {\r\n        fn(node as Text);\r\n      } else if (node.nodeType === 1 && node.childNodes && node.childNodes[0]) {\r\n        walk(node, fn);\r\n      }\r\n      node = node.nextSibling;\r\n    }\r\n  }\r\n\r\n  // Clean up table rows where ALL cells are empty\r\n  cleanupTableRows(div);\r\n\r\n  // Remove empty tags after truncation\r\n  return removeEmptyTags(div.innerHTML);\r\n};\r\n\r\n/**\r\n * Add/remove class 'hidden' to element\r\n *\r\n * @param element - HTMLElement to modify\r\n * @param type - true to add, false to remove\r\n */\r\nexport const addRemoveClass = (element: Element, type = false): void => {\r\n  element.classList[type ? \"add\" : \"remove\"](\"hidden\");\r\n};\r\n\r\n/**\r\n * Set attributes to element\r\n *\r\n * @param el - HTMLElement to set attributes on\r\n * @param attributes - object with attribute key-value pairs\r\n */\r\nexport const setAttributes = (\r\n  el: HTMLElement,\r\n  attributes: Record<string, string | number | boolean>,\r\n): void => {\r\n  for (const key in attributes) {\r\n    el.setAttribute(key, String(attributes[key]));\r\n  }\r\n};\r\n\r\n/**\r\n * Create element\r\n *\r\n * @param type - type of element to create\r\n * @returns created HTMLElement\r\n */\r\nexport const createElement = <K extends keyof HTMLElementTagNameMap>(\r\n  type: K,\r\n): HTMLElementTagNameMap[K] => document.createElement(type);\r\n","export interface RegexRule {\r\n  match: RegExp;\r\n  replace: string;\r\n}\r\n\r\nexport interface RegexConfig {\r\n  newLine?: RegexRule;\r\n  space?: RegexRule;\r\n  br?: RegexRule;\r\n  html?: RegexRule;\r\n  [key: string]: RegexRule | undefined;\r\n}\r\n\r\n/**\r\n * Default regexes for validation\r\n *\r\n * For type=\"text\": removes all HTML tags except inline text formatting\r\n * - Keeps: <b>, <strong>, <i>, <em>, <u>, <mark>, <small>, <sub>, <sup>\r\n * - Removes: <table>, <ul>, <img>, <figure>, <div>, <p>, etc.\r\n */\r\nexport const defaultRegex: RegexConfig = {\r\n  newLine: {\r\n    match: /(\\r\\n|\\n|\\r)/gm,\r\n    replace: \" \",\r\n  },\r\n  space: {\r\n    match: /\\s\\s+/gm,\r\n    replace: \" \",\r\n  },\r\n  br: {\r\n    match: /<br\\b[^>]*\\/?>/gim,\r\n    replace: \" \",\r\n  },\r\n  html: {\r\n    // Removes all tags except inline text formatting\r\n    // \\b ensures word boundary (e.g., <i> is kept, but <img> is removed)\r\n    match: /(<((?!\\/?(?:b|strong|i|em|u|mark|small|sub|sup)\\b)[^>]+)>)/gi,\r\n    replace: \"\",\r\n  },\r\n};\r\n","import type { ShowMoreOptions } from \"./utils/defaults\";\r\nimport { defaultOptions, defaultRemoveElements } from \"./utils/defaults\";\r\nimport {\r\n  addRemoveClass,\r\n  createElement,\r\n  getNumber,\r\n  htmlSubstr,\r\n  removeElements,\r\n  setAttributes,\r\n} from \"./utils/function\";\r\nimport type { RegexConfig } from \"./utils/regex\";\r\nimport { defaultRegex } from \"./utils/regex\";\r\n\r\ninterface ShowMoreConfig {\r\n  onMoreLess?: (action: string, object: ShowMoreInternalObject) => void;\r\n  regex?: RegexConfig;\r\n  config?: Partial<ShowMoreOptions>;\r\n}\r\n\r\ninterface ShowMoreInternalObject extends ShowMoreOptions {\r\n  index: number;\r\n  classArray: DOMTokenList;\r\n  element: HTMLElement;\r\n  originalText?: string;\r\n  truncatedText?: string;\r\n  target?: EventTarget;\r\n}\r\n\r\n/**\r\n * ShowMore - JavaScript library that truncates text, list or table by chars, elements or rows\r\n */\r\nexport default class ShowMore {\r\n  private _onMoreLess: (action: string, object: ShowMoreInternalObject) => void;\r\n  private _regex: RegexConfig;\r\n  private _object!: ShowMoreInternalObject;\r\n  private _checkExp = false;\r\n\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param className - CSS selector for elements\r\n   * @param config - Configuration object\r\n   */\r\n  constructor(className: string, config: ShowMoreConfig = {}) {\r\n    const { onMoreLess = () => {}, regex = {}, config: globalConfig } = config;\r\n\r\n    // all html elements\r\n    const elements = Array.from(\r\n      document.querySelectorAll<HTMLElement>(className),\r\n    );\r\n\r\n    // callback function\r\n    this._onMoreLess = onMoreLess;\r\n\r\n    // global regex\r\n    this._regex = { ...defaultRegex, ...regex };\r\n\r\n    elements.forEach((item, index) => {\r\n      const configDataAttr = item.getAttribute(\"data-config\");\r\n      const configData = configDataAttr ? JSON.parse(configDataAttr) : {};\r\n\r\n      const configDataAndGlobal = { ...globalConfig, ...configData };\r\n\r\n      this._object = {\r\n        index,\r\n        classArray: item.classList,\r\n        ...defaultOptions,\r\n        ...configDataAndGlobal,\r\n        typeElement: configDataAndGlobal.element || \"span\",\r\n        element: item,\r\n      } as ShowMoreInternalObject;\r\n\r\n      this._initial();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Initial function\r\n   */\r\n  private _initial = (): void => {\r\n    const {\r\n      element,\r\n      after = 0,\r\n      ellipsis,\r\n      nobutton,\r\n      limit = 0,\r\n      type,\r\n    } = this._object;\r\n    // set default aria-expanded to false\r\n    setAttributes(element, { \"showmore-expanded\": \"false\" });\r\n\r\n    const limitCounts = limit + after;\r\n    const ellips = ellipsis === false ? \"\" : \"...\";\r\n\r\n    // text\r\n    if (type === \"text\") {\r\n      const originalText = element.innerHTML.trim();\r\n      const elementText = element.textContent?.trim() || \"\";\r\n\r\n      if (elementText.length > limitCounts) {\r\n        // Remove unwanted elements (with their content) based on config\r\n        const elementsToRemove = this._object.removeElements || [];\r\n        let orgTexReg = removeElements(originalText, elementsToRemove);\r\n\r\n        // Check if removeElements is customized (different from default)\r\n        const isCustomRemoveElements =\r\n          JSON.stringify(elementsToRemove) !==\r\n          JSON.stringify(defaultRemoveElements);\r\n\r\n        // Apply regex rules for remaining tags\r\n        for (const rule of Object.values(this._regex)) {\r\n          if (rule?.match) {\r\n            // Skip 'html' regex if user has custom removeElements\r\n            // (user controls what to remove via removeElements)\r\n            if (isCustomRemoveElements && rule === this._regex.html) {\r\n              continue;\r\n            }\r\n            orgTexReg = orgTexReg.replace(rule.match, rule.replace);\r\n          }\r\n        }\r\n\r\n        const truncatedText = htmlSubstr(orgTexReg, limit - 1).concat(ellips);\r\n\r\n        element.textContent = \"\";\r\n        element.insertAdjacentHTML(\"beforeend\", truncatedText);\r\n\r\n        this._clickEvent(element, {\r\n          ...this._object,\r\n          originalText,\r\n          truncatedText,\r\n        });\r\n\r\n        if (!nobutton) {\r\n          this._addBtn(this._object);\r\n        }\r\n      }\r\n      return;\r\n    }\r\n\r\n    // list and table\r\n    if (type === \"list\" || type === \"table\") {\r\n      const items = this._getNumberCount(element, type);\r\n\r\n      if (items.length > limitCounts) {\r\n        // Optimize: iterate only from limit to end\r\n        for (let i = limit; i < items.length; i++) {\r\n          addRemoveClass(items[i], true);\r\n        }\r\n\r\n        if (!nobutton) {\r\n          this._addBtn(this._object);\r\n        }\r\n\r\n        // add event click\r\n        this._clickEvent(\r\n          type === \"list\"\r\n            ? element\r\n            : (element.nextElementSibling as HTMLElement),\r\n          this._object,\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Event click\r\n   *\r\n   * @param element - HTMLElement to attach event to\r\n   * @param object - Configuration object\r\n   */\r\n  private _clickEvent = (\r\n    element: HTMLElement | null,\r\n    object: ShowMoreInternalObject,\r\n  ): void => {\r\n    if (!element) return;\r\n    element.addEventListener(\"click\", this._handleEvent.bind(this, object));\r\n  };\r\n\r\n  /**\r\n   * Create button\r\n   *\r\n   * @param config - Configuration object\r\n   * @returns HTMLButtonElement\r\n   */\r\n  private _createBtn = (config: ShowMoreInternalObject): HTMLButtonElement => {\r\n    const { element, number, less, more, type, btnClass, btnClassAppend } =\r\n      config;\r\n\r\n    const typeAria = this._checkExp ? less || \"\" : more || \"\";\r\n    let label = this._checkExp\r\n      ? (less as string).trim() || \"collapse\"\r\n      : (more as string).trim() || \"expand\";\r\n\r\n    // Optimize: cache getNumber result\r\n    const numberText = number ? getNumber(element, type || \"\") : \"\";\r\n    label = number ? label + numberText : label;\r\n\r\n    const button = createElement(\"button\");\r\n\r\n    button.className =\r\n      btnClassAppend == null ? btnClass : `${btnClass} ${btnClassAppend}`;\r\n    setAttributes(button, {\r\n      \"aria-expanded\": this._checkExp,\r\n      \"aria-label\": label,\r\n      tabindex: 0,\r\n    });\r\n\r\n    // Use cached numberText\r\n    button.insertAdjacentHTML(\r\n      \"beforeend\",\r\n      number ? typeAria + numberText : typeAria,\r\n    );\r\n\r\n    return button;\r\n  };\r\n\r\n  /**\r\n   * Event handler\r\n   *\r\n   * @param object - Configuration object\r\n   * @param event - Mouse event\r\n   */\r\n  private _handleEvent = (\r\n    object: ShowMoreInternalObject,\r\n    event: MouseEvent,\r\n  ): void => {\r\n    const { target } = event;\r\n    if (!(target instanceof HTMLElement)) return;\r\n\r\n    const {\r\n      element,\r\n      type,\r\n      limit = 0,\r\n      less,\r\n      typeElement,\r\n      originalText,\r\n      truncatedText,\r\n      btnClass,\r\n    } = object;\r\n\r\n    // check if the button is clicked\r\n    if (!target.classList.contains(btnClass)) return;\r\n\r\n    const showMoreExpanded = element.getAttribute(\"showmore-expanded\");\r\n    this._checkExp = showMoreExpanded === \"false\";\r\n\r\n    // --------------------------------------------------\r\n    // text\r\n    if (type === \"text\") {\r\n      element.textContent = \"\";\r\n\r\n      element.insertAdjacentHTML(\r\n        \"beforeend\",\r\n        this._checkExp ? originalText || \"\" : truncatedText || \"\",\r\n      );\r\n\r\n      if (less) {\r\n        const el = createElement(typeElement as keyof HTMLElementTagNameMap);\r\n        el.classList.add(\"show-more-wrapper\");\r\n        const btn = this._createBtn(object);\r\n        if (btn) el.insertAdjacentElement(\"beforeend\", btn);\r\n        element.appendChild(el);\r\n      }\r\n    }\r\n\r\n    // --------------------------------------------------\r\n    // list and table\r\n    if (type === \"list\" || type === \"table\") {\r\n      const items = this._getNumberCount(element, type);\r\n      const isExpanding = showMoreExpanded === \"false\";\r\n\r\n      if (isExpanding) {\r\n        // Show all: remove hidden class from all\r\n        for (let i = limit; i < items.length; i++) {\r\n          addRemoveClass(items[i], false);\r\n        }\r\n      } else {\r\n        // Hide: add hidden class from limit to end\r\n        const endIndex = type === \"list\" ? items.length - 1 : items.length;\r\n        for (let i = limit; i < endIndex; i++) {\r\n          addRemoveClass(items[i], true);\r\n        }\r\n      }\r\n    }\r\n\r\n    // set aria-expanded\r\n    if (type) {\r\n      this._setExpand({ ...object, target });\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Get number count based on type\r\n   */\r\n  private _getNumberCount = (\r\n    element: HTMLElement,\r\n    type: string,\r\n  ): HTMLElement[] | HTMLCollectionOf<HTMLTableRowElement> => {\r\n    if (type === \"list\") {\r\n      return Array.from(element.children) as HTMLElement[];\r\n    }\r\n    return (element as HTMLTableElement).rows;\r\n  };\r\n\r\n  /**\r\n   * Add button\r\n   *\r\n   * @param object - Configuration object\r\n   */\r\n  private _addBtn = (object: ShowMoreInternalObject): void => {\r\n    const { type, element, more, typeElement } = object;\r\n\r\n    if (!more) return;\r\n\r\n    if (type === \"table\") {\r\n      element.insertAdjacentElement(\"afterend\", this._createBtn(object));\r\n    } else {\r\n      const el = createElement(typeElement as keyof HTMLElementTagNameMap);\r\n      el.classList.add(\"show-more-wrapper\");\r\n      el.appendChild(this._createBtn(object));\r\n      element.appendChild(el);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set aria-expanded\r\n   *\r\n   * @param object - Configuration object with target\r\n   */\r\n  private _setExpand = (\r\n    object: ShowMoreInternalObject & { target: EventTarget },\r\n  ): void => {\r\n    const { element, type, less, more, number, target } = object;\r\n\r\n    if (!(target instanceof HTMLElement)) return;\r\n\r\n    const typeAria = this._checkExp ? less : more;\r\n    const aria = this._checkExp ? \"expand\" : \"collapse\";\r\n    const lastChild = element.lastElementChild;\r\n\r\n    // Optimize: cache getNumber result\r\n    const numberText = number ? getNumber(element, type || \"\") : \"\";\r\n    const ariaLabel = number ? typeAria + numberText : typeAria;\r\n\r\n    setAttributes(element, { \"showmore-expanded\": this._checkExp });\r\n    setAttributes(target, {\r\n      \"aria-expanded\": this._checkExp,\r\n      \"aria-label\": ariaLabel,\r\n    });\r\n\r\n    // callback function on more/less\r\n    this._onMoreLess(aria, object);\r\n\r\n    if (typeAria) {\r\n      // Use cached numberText\r\n      target.innerHTML = number ? typeAria + numberText : typeAria;\r\n    } else if (type === \"table\") {\r\n      target.parentNode?.removeChild(target);\r\n    } else if (type === \"list\" && lastChild?.parentNode) {\r\n      lastChild.parentNode.removeChild(lastChild);\r\n    }\r\n  };\r\n}\r\n"],"names":["defaultRemoveElements","defaultOptions","typeElement","more","less","number","nobutton","after","btnClass","btnClassAppend","removeElements","getNumber","element","type","elementType","rows","children","numbersElementHidden","Array","from","filter","el","classList","contains","length","html","tags","div","createElement","innerHTML","forEach","tag","elements","querySelectorAll","remove","cleanupTableRows","tables","table","row","cells","allEmpty","every","cell","textContent","trim","removeEmptyTags","cleaned","prev","replace","htmlSubstr","originalText","count","insertAdjacentHTML","remaining","walk","track","len","data","substringData","fn","node","firstChild","nodeType","childNodes","nextSibling","addRemoveClass","setAttributes","attributes","key","setAttribute","String","document","defaultRegex","newLine","match","space","br","ShowMore","className","config","_checkExp","_initial","ellipsis","limit","_object","limitCounts","ellips","elementText","elementsToRemove","orgTexReg","isCustomRemoveElements","JSON","stringify","rule","Object","values","_regex","truncatedText","concat","_clickEvent","_addBtn","items","_getNumberCount","i","nextElementSibling","object","addEventListener","_handleEvent","bind","_createBtn","typeAria","label","numberText","button","tabindex","event","target","HTMLElement","showMoreExpanded","getAttribute","add","btn","insertAdjacentElement","appendChild","isExpanding","endIndex","_setExpand","aria","lastChild","lastElementChild","ariaLabel","_onMoreLess","parentNode","removeChild","onMoreLess","regex","globalConfig","item","index","configDataAttr","configData","parse","configDataAndGlobal","classArray"],"mappings":"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"}