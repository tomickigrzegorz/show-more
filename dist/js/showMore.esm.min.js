const e=(e,t)=>{let{rows:s,children:n}=e;const i="table"===t?s:n,l=[].slice.call(i).filter((e=>e.classList.contains("hidden"))).length;return 0!==l?` ${l}`:""},t=function(e,t){return void 0===t&&(t=!1),e.classList[t?"add":"remove"]("hidden")},s=(e,t)=>{for(let s in t)e.setAttribute(s,t[s])},n=e=>document.createElement(e),i={newLine:{match:/(\r\n|\n|\r)/gm,replace:""},space:{match:/\s\s+/gm,replace:" "},br:{match:/<br\s*\/?>/gim,replace:""},html:{match:/(<((?!b|\/b|!strong|\/strong)[^>]+)>)/gi,replace:""}},l={typeElement:"span",more:!1,less:!1,number:!1,nobutton:!1,after:0,btnClass:"show-more-btn",btnClassAppend:null};class r{constructor(e,t){let{onMoreLess:s=(()=>{}),regex:n={},config:r}=void 0===t?{}:t;const o=[].slice.call(document.querySelectorAll(e));this.t=s,this.i={...i,...n},o.map(((e,t)=>{const s=JSON.parse(e.getAttribute("data-config")),n={...r,...s};this.l={index:t,classArray:e.classList,...l,...n,typeElement:n.element||"span",element:e},this.o()}))}o=()=>{const{element:e,after:i,ellipsis:l,nobutton:r,limit:o,type:a}=this.l;s(e,{"showmore-expanded":"false"});const c=o+i,h=!1===l?"":"...";if("text"===a){const t=e.innerHTML.trim();if(e.textContent.trim().length>c){let s=t;for(let e in this.i){const{match:t,replace:n}=this.i[e];e&&t&&(s=s.replace(t,n))}const i=((e,t)=>{let s=n("div");return s.insertAdjacentHTML("afterbegin",e),function e(t,s){let n=t.firstChild;do{3===n.nodeType?s(n):1===n.nodeType&&n.childNodes&&n.childNodes[0]&&e(n,s)}while(n=n.nextSibling)}(s,(function(e){if(t>0){let s=e.data.length;(t-=s)<=0&&(e.data=e.substringData(0,e.data.length+t))}else e.data=""})),s.innerHTML})(s,o-1).concat(h);if(e.textContent="",e.insertAdjacentHTML("beforeend",i),this.h(e,{...this.l,originalText:t,truncatedText:i}),r)return;this.m(this.l)}}if("list"===a||"table"===a){const s=this.p(e,a);if(s.length>c){for(let e=o;e<s.length;e++)t(s[e],!0);if(r||this.m(this.l),this.h("list"===a?e:e.nextElementSibling,this.l),r)return}}};h=(e,t)=>e.addEventListener("click",this.u.bind(this,t));g=t=>{let{element:i,number:l,less:r,more:o,type:a,btnClass:c,btnClassAppend:h}=t;const d=this._?r||"":o||"";let m=this._?r.trim()||"collapse":o.trim()||"expand";m=l?m+e(i,a):m;const p=!!this._,f=n("button");return f.className=null==h?c:c+" "+h,s(f,{"aria-expanded":p,"aria-label":m,tabindex:0}),f.insertAdjacentHTML("beforeend",l?d+e(i,a):d),f};u=(e,s)=>{let{target:i}=s;const{element:l,type:r,limit:o,less:a,typeElement:c,originalText:h,truncatedText:d,btnClass:m}=e,p=i.classList.contains(m);if(!p)return;const f=l.getAttribute("showmore-expanded");if(this._="false"===f,"text"===r&&p&&(l.textContent="",l.insertAdjacentHTML("beforeend",this._?h:d),a)){const t=n(c);t.classList.add("show-more-wrapper"),t.insertAdjacentElement("beforeend",this.g(e)),l.appendChild(t)}if("list"===r||"table"===r){const e=this.p(l,r);for(let s=0;s<e.length;s++){const n="list"===r?s>=o&&s<e.length-1:s>=o;"false"===f?t(e[s]):n&&t(e[s],!0)}}r&&this.C({...e,target:i})};p=(e,t)=>"list"===t?[].slice.call(e.children):e.rows;m=e=>{const{type:t,element:s,more:i,typeElement:l}=e;if(i)if("table"===t)s.insertAdjacentElement("afterend",this.g(e));else{const t=n(l);t.classList.add("show-more-wrapper"),t.appendChild(this.g(e)),s.appendChild(t)}};C=t=>{const{element:n,type:i,less:l,more:r,number:o,target:a}=t,c=this._?l:r,h=this._?"expand":"collapse",d=n.lastElementChild,m=o?c+e(n,i):c;s(n,{"showmore-expanded":this._}),s(a,{"aria-expanded":this._,"aria-label":m}),this.t(h,t),c?a.innerHTML=o?c+e(n,i):c:"table"===i?a.parentNode.removeChild(a):"list"===i&&d.parentNode.removeChild(d)}}export{r as default};
