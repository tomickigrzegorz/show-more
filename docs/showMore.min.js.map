{"version":3,"file":"showMore.min.js","sources":["../sources/utils/defaults.ts","../sources/utils/function.ts","../sources/utils/regex.ts","../sources/index.ts"],"sourcesContent":["export interface ShowMoreOptions {\r\n  typeElement: string;\r\n  more: string | false;\r\n  less: string | false;\r\n  number: boolean;\r\n  nobutton: boolean;\r\n  after: number;\r\n  btnClass: string;\r\n  btnClassAppend: string | null;\r\n  limit?: number;\r\n  type?: \"text\" | \"list\" | \"table\";\r\n  element?: HTMLElement;\r\n  ellipsis?: boolean | string;\r\n}\r\n\r\nexport const defaultOptions: Partial<ShowMoreOptions> = {\r\n  typeElement: \"span\",\r\n  more: false,\r\n  less: false,\r\n  number: false,\r\n  nobutton: false,\r\n  after: 0,\r\n  btnClass: \"show-more-btn\",\r\n  btnClassAppend: null,\r\n};\r\n","/**\r\n * Get hidden element count\r\n *\r\n * @param element - HTMLElement with rows or children\r\n * @param type - type of element table | list\r\n * @returns string with count or empty string\r\n */\r\nexport const getNumber = (\r\n  element: {\r\n    rows?: HTMLCollectionOf<HTMLTableRowElement>;\r\n    children?: HTMLCollection;\r\n  },\r\n  type: string,\r\n): string => {\r\n  const elementType = type === \"table\" ? element.rows : element.children;\r\n\r\n  if (!elementType) return \"\";\r\n\r\n  const numbersElementHidden = Array.from(elementType).filter((el) =>\r\n    el.classList.contains(\"hidden\"),\r\n  ).length;\r\n  return numbersElementHidden !== 0 ? ` ${numbersElementHidden}` : \"\";\r\n};\r\n\r\n// https://stackoverflow.com/questions/6003271/substring-text-with-html-tags-in-javascript\r\n/**\r\n * Substring text with html tags\r\n *\r\n * @param originalText - text with html tags\r\n * @param count - limit of characters\r\n * @returns truncated html string\r\n */\r\nexport const htmlSubstr = (originalText: string, count: number): string => {\r\n  const div = createElement(\"div\");\r\n  div.insertAdjacentHTML(\"afterbegin\", originalText);\r\n\r\n  let remaining = count;\r\n\r\n  walk(div, track);\r\n\r\n  function track(el: Text): void {\r\n    if (remaining > 0) {\r\n      const len = el.data.length;\r\n      remaining -= len;\r\n      if (remaining <= 0) {\r\n        el.data = el.substringData(0, el.data.length + remaining);\r\n      }\r\n    } else {\r\n      el.data = \"\";\r\n    }\r\n  }\r\n\r\n  function walk(el: Node, fn: (node: Text) => void): void {\r\n    let node = el.firstChild;\r\n    while (node) {\r\n      if (node.nodeType === 3) {\r\n        fn(node as Text);\r\n      } else if (node.nodeType === 1 && node.childNodes && node.childNodes[0]) {\r\n        walk(node, fn);\r\n      }\r\n      node = node.nextSibling;\r\n    }\r\n  }\r\n  return div.innerHTML;\r\n};\r\n\r\n/**\r\n * Add/remove class 'hidden' to element\r\n *\r\n * @param element - HTMLElement to modify\r\n * @param type - true to add, false to remove\r\n */\r\nexport const addRemoveClass = (element: Element, type = false): void => {\r\n  element.classList[type ? \"add\" : \"remove\"](\"hidden\");\r\n};\r\n\r\n/**\r\n * Set attributes to element\r\n *\r\n * @param el - HTMLElement to set attributes on\r\n * @param attributes - object with attribute key-value pairs\r\n */\r\nexport const setAttributes = (\r\n  el: HTMLElement,\r\n  attributes: Record<string, string | number | boolean>,\r\n): void => {\r\n  for (const key in attributes) {\r\n    el.setAttribute(key, String(attributes[key]));\r\n  }\r\n};\r\n\r\n/**\r\n * Create element\r\n *\r\n * @param type - type of element to create\r\n * @returns created HTMLElement\r\n */\r\nexport const createElement = <K extends keyof HTMLElementTagNameMap>(\r\n  type: K,\r\n): HTMLElementTagNameMap[K] => document.createElement(type);\r\n","export interface RegexRule {\r\n  match: RegExp;\r\n  replace: string;\r\n}\r\n\r\nexport interface RegexConfig {\r\n  newLine?: RegexRule;\r\n  space?: RegexRule;\r\n  br?: RegexRule;\r\n  html?: RegexRule;\r\n  [key: string]: RegexRule | undefined;\r\n}\r\n\r\n/**\r\n * Default regexes for validation\r\n */\r\nexport const defaultRegex: RegexConfig = {\r\n  newLine: {\r\n    match: /(\\r\\n|\\n|\\r)/gm,\r\n    replace: \" \",\r\n  },\r\n  space: {\r\n    match: /\\s\\s+/gm,\r\n    replace: \" \",\r\n  },\r\n  br: {\r\n    match: /<br\\b[^>]*\\/?>/gim,\r\n    replace: \" \",\r\n  },\r\n  html: {\r\n    match: /(<((?!b|\\/b|!strong|\\/strong)[^>]+)>)/gi,\r\n    replace: \"\",\r\n  },\r\n};\r\n","import type { ShowMoreOptions } from \"./utils/defaults\";\r\nimport { defaultOptions } from \"./utils/defaults\";\r\nimport {\r\n  addRemoveClass,\r\n  createElement,\r\n  getNumber,\r\n  htmlSubstr,\r\n  setAttributes,\r\n} from \"./utils/function\";\r\nimport type { RegexConfig } from \"./utils/regex\";\r\nimport { defaultRegex } from \"./utils/regex\";\r\n\r\ninterface ShowMoreConfig {\r\n  onMoreLess?: (action: string, object: ShowMoreInternalObject) => void;\r\n  regex?: RegexConfig;\r\n  config?: Partial<ShowMoreOptions>;\r\n}\r\n\r\ninterface ShowMoreInternalObject extends ShowMoreOptions {\r\n  index: number;\r\n  classArray: DOMTokenList;\r\n  element: HTMLElement;\r\n  originalText?: string;\r\n  truncatedText?: string;\r\n  target?: EventTarget;\r\n}\r\n\r\n/**\r\n * ShowMore - JavaScript library that truncates text, list or table by chars, elements or rows\r\n */\r\nexport default class ShowMore {\r\n  private _onMoreLess: (action: string, object: ShowMoreInternalObject) => void;\r\n  private _regex: RegexConfig;\r\n  private _object!: ShowMoreInternalObject;\r\n  private _checkExp = false;\r\n\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param className - CSS selector for elements\r\n   * @param config - Configuration object\r\n   */\r\n  constructor(className: string, config: ShowMoreConfig = {}) {\r\n    const { onMoreLess = () => {}, regex = {}, config: globalConfig } = config;\r\n\r\n    // all html elements\r\n    const elements = Array.from(\r\n      document.querySelectorAll<HTMLElement>(className),\r\n    );\r\n\r\n    // callback function\r\n    this._onMoreLess = onMoreLess;\r\n\r\n    // global regex\r\n    this._regex = { ...defaultRegex, ...regex };\r\n\r\n    elements.forEach((item, index) => {\r\n      const configDataAttr = item.getAttribute(\"data-config\");\r\n      const configData = configDataAttr ? JSON.parse(configDataAttr) : {};\r\n\r\n      const configDataAndGlobal = { ...globalConfig, ...configData };\r\n\r\n      this._object = {\r\n        index,\r\n        classArray: item.classList,\r\n        ...defaultOptions,\r\n        ...configDataAndGlobal,\r\n        typeElement: configDataAndGlobal.element || \"span\",\r\n        element: item,\r\n      } as ShowMoreInternalObject;\r\n\r\n      this._initial();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Initial function\r\n   */\r\n  private _initial = (): void => {\r\n    const {\r\n      element,\r\n      after = 0,\r\n      ellipsis,\r\n      nobutton,\r\n      limit = 0,\r\n      type,\r\n    } = this._object;\r\n    // set default aria-expanded to false\r\n    setAttributes(element, { \"showmore-expanded\": \"false\" });\r\n\r\n    const limitCounts = limit + after;\r\n    const ellips = ellipsis === false ? \"\" : \"...\";\r\n\r\n    // text\r\n    if (type === \"text\") {\r\n      const originalText = element.innerHTML.trim();\r\n      const elementText = element.textContent?.trim() || \"\";\r\n\r\n      if (elementText.length > limitCounts) {\r\n        let orgTexReg = originalText;\r\n\r\n        for (const key in this._regex) {\r\n          const rule = this._regex[key];\r\n          if (rule && key) {\r\n            const { match, replace } = rule;\r\n            if (match) orgTexReg = orgTexReg.replace(match, replace);\r\n          }\r\n        }\r\n\r\n        const truncatedText = htmlSubstr(orgTexReg, limit - 1).concat(ellips);\r\n\r\n        element.textContent = \"\";\r\n        element.insertAdjacentHTML(\"beforeend\", truncatedText);\r\n\r\n        this._clickEvent(element, {\r\n          ...this._object,\r\n          originalText,\r\n          truncatedText,\r\n        });\r\n\r\n        if (nobutton) return;\r\n        this._addBtn(this._object);\r\n      }\r\n    }\r\n\r\n    // list and table\r\n    if (type === \"list\" || type === \"table\") {\r\n      const items = this._getNumberCount(element, type);\r\n\r\n      if (items.length > limitCounts) {\r\n        for (let i = limit; i < items.length; i++) {\r\n          addRemoveClass(items[i], true);\r\n        }\r\n\r\n        if (!nobutton) {\r\n          // add button to the list and table\r\n          this._addBtn(this._object);\r\n        }\r\n\r\n        // add event click\r\n        this._clickEvent(\r\n          type === \"list\"\r\n            ? element\r\n            : (element.nextElementSibling as HTMLElement),\r\n          this._object,\r\n        );\r\n\r\n        if (nobutton) return;\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Event click\r\n   *\r\n   * @param element - HTMLElement to attach event to\r\n   * @param object - Configuration object\r\n   */\r\n  private _clickEvent = (\r\n    element: HTMLElement | null,\r\n    object: ShowMoreInternalObject,\r\n  ): void => {\r\n    if (!element) return;\r\n    element.addEventListener(\"click\", this._handleEvent.bind(this, object));\r\n  };\r\n\r\n  /**\r\n   * Create button\r\n   *\r\n   * @param config - Configuration object\r\n   * @returns HTMLButtonElement\r\n   */\r\n  private _createBtn = (config: ShowMoreInternalObject): HTMLButtonElement => {\r\n    const { element, number, less, more, type, btnClass, btnClassAppend } =\r\n      config;\r\n\r\n    const typeAria = this._checkExp ? less || \"\" : more || \"\";\r\n    let label = this._checkExp\r\n      ? (less as string).trim() || \"collapse\"\r\n      : (more as string).trim() || \"expand\";\r\n\r\n    label = number ? label + getNumber(element, type || \"\") : label;\r\n\r\n    const expanded = !!this._checkExp;\r\n\r\n    const button = createElement(\"button\");\r\n\r\n    button.className =\r\n      btnClassAppend == null ? btnClass : `${btnClass} ${btnClassAppend}`;\r\n    setAttributes(button, {\r\n      \"aria-expanded\": expanded,\r\n      \"aria-label\": label,\r\n      tabindex: 0,\r\n    });\r\n\r\n    button.insertAdjacentHTML(\r\n      \"beforeend\",\r\n      number ? typeAria + getNumber(element, type || \"\") : typeAria,\r\n    );\r\n\r\n    return button;\r\n  };\r\n\r\n  /**\r\n   * Event handler\r\n   *\r\n   * @param object - Configuration object\r\n   * @param event - Mouse event\r\n   */\r\n  private _handleEvent = (\r\n    object: ShowMoreInternalObject,\r\n    event: MouseEvent,\r\n  ): void => {\r\n    const { target } = event;\r\n    if (!(target instanceof HTMLElement)) return;\r\n\r\n    const {\r\n      element,\r\n      type,\r\n      limit = 0,\r\n      less,\r\n      typeElement,\r\n      originalText,\r\n      truncatedText,\r\n      btnClass,\r\n    } = object;\r\n\r\n    // check if the button is clicked\r\n    const checkContainsClass = target.classList.contains(btnClass);\r\n\r\n    if (!checkContainsClass) return;\r\n\r\n    const showMoreExpanded = element.getAttribute(\"showmore-expanded\");\r\n    this._checkExp = showMoreExpanded === \"false\";\r\n\r\n    // --------------------------------------------------\r\n    // text\r\n    if (type === \"text\" && checkContainsClass) {\r\n      element.textContent = \"\";\r\n\r\n      element.insertAdjacentHTML(\r\n        \"beforeend\",\r\n        this._checkExp ? originalText || \"\" : truncatedText || \"\",\r\n      );\r\n\r\n      if (less) {\r\n        const el = createElement(typeElement as keyof HTMLElementTagNameMap);\r\n        el.classList.add(\"show-more-wrapper\");\r\n        const btn = this._createBtn(object);\r\n        if (btn) el.insertAdjacentElement(\"beforeend\", btn);\r\n        element.appendChild(el);\r\n      }\r\n    }\r\n\r\n    // --------------------------------------------------\r\n    // list and table\r\n    if (type === \"list\" || type === \"table\") {\r\n      const items = this._getNumberCount(element, type);\r\n\r\n      for (let i = 0; i < items.length; i++) {\r\n        const typeRemove =\r\n          type === \"list\" ? i >= limit && i < items.length - 1 : i >= limit;\r\n\r\n        if (showMoreExpanded === \"false\") {\r\n          addRemoveClass(items[i]);\r\n        } else if (typeRemove) {\r\n          addRemoveClass(items[i], true);\r\n        }\r\n      }\r\n    }\r\n\r\n    // set aria-expanded\r\n    if (type) {\r\n      this._setExpand({ ...object, target });\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Get number count based on type\r\n   */\r\n  private _getNumberCount = (\r\n    element: HTMLElement,\r\n    type: string,\r\n  ): HTMLElement[] | HTMLCollectionOf<HTMLTableRowElement> => {\r\n    if (type === \"list\") {\r\n      return Array.from(element.children) as HTMLElement[];\r\n    }\r\n    return (element as HTMLTableElement).rows;\r\n  };\r\n\r\n  /**\r\n   * Add button\r\n   *\r\n   * @param object - Configuration object\r\n   */\r\n  private _addBtn = (object: ShowMoreInternalObject): void => {\r\n    const { type, element, more, typeElement } = object;\r\n\r\n    if (!more) return;\r\n\r\n    if (type === \"table\") {\r\n      element.insertAdjacentElement(\"afterend\", this._createBtn(object));\r\n    } else {\r\n      const el = createElement(typeElement as keyof HTMLElementTagNameMap);\r\n      el.classList.add(\"show-more-wrapper\");\r\n      el.appendChild(this._createBtn(object));\r\n      element.appendChild(el);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set aria-expanded\r\n   *\r\n   * @param object - Configuration object with target\r\n   */\r\n  private _setExpand = (\r\n    object: ShowMoreInternalObject & { target: EventTarget },\r\n  ): void => {\r\n    const { element, type, less, more, number, target } = object;\r\n\r\n    if (!(target instanceof HTMLElement)) return;\r\n\r\n    const typeAria = this._checkExp ? less : more;\r\n    const aria = this._checkExp ? \"expand\" : \"collapse\";\r\n    const lastChild = element.lastElementChild;\r\n\r\n    const ariaLabel = number\r\n      ? typeAria + getNumber(element, type || \"\")\r\n      : typeAria;\r\n\r\n    setAttributes(element, { \"showmore-expanded\": this._checkExp });\r\n    setAttributes(target, {\r\n      \"aria-expanded\": this._checkExp,\r\n      \"aria-label\": ariaLabel,\r\n    });\r\n\r\n    // callback function on more/less\r\n    this._onMoreLess(aria, object);\r\n\r\n    if (typeAria) {\r\n      target.innerHTML = number\r\n        ? typeAria + getNumber(element, type || \"\")\r\n        : typeAria;\r\n    } else if (type === \"table\") {\r\n      target.parentNode?.removeChild(target);\r\n    } else if (type === \"list\" && lastChild?.parentNode) {\r\n      lastChild.parentNode.removeChild(lastChild);\r\n    }\r\n  };\r\n}\r\n"],"names":["defaultOptions","typeElement","more","less","number","nobutton","after","btnClass","btnClassAppend","getNumber","element","type","elementType","rows","children","numbersElementHidden","Array","from","filter","el","classList","contains","length","addRemoveClass","setAttributes","attributes","key","setAttribute","String","createElement","document","defaultRegex","newLine","match","replace","space","br","html","constructor","className","config","_checkExp","this","_initial","ellipsis","limit","_object","limitCounts","ellips","originalText","innerHTML","trim","textContent","orgTexReg","_regex","rule","truncatedText","count","div","insertAdjacentHTML","remaining","walk","fn","node","firstChild","nodeType","childNodes","nextSibling","len","data","substringData","htmlSubstr","concat","_clickEvent","_addBtn","items","_getNumberCount","i","nextElementSibling","object","addEventListener","_handleEvent","bind","_createBtn","typeAria","label","expanded","button","tabindex","event","target","HTMLElement","checkContainsClass","showMoreExpanded","getAttribute","add","btn","insertAdjacentElement","appendChild","typeRemove","_setExpand","aria","lastChild","lastElementChild","ariaLabel","_onMoreLess","parentNode","removeChild","onMoreLess","regex","globalConfig","elements","querySelectorAll","forEach","item","index","configDataAttr","configData","JSON","parse","configDataAndGlobal","classArray"],"mappings":"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"}